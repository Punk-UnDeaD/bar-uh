import style from './x-icon.inline.scss'

const dSet = {
  "sort": "m 16,24 v 1 L 9,32 2,25 V 24 H 6 V 0 h 6 V 24 Z M 23,0 30,7 V 8 H 26 V 32 H 20 V 8 H 16 V 7 Z",
  "sort-by-attributes": "m 14,24 v 1 L 7,32 0,25 V 24 H 4 V 0 h 6 V 24 Z M 24,6 H 18 V 0 h 6 z m 2,8 H 18 V 8 h 8 z m 4,8 H 18 v -6 h 12 z m 2,8 H 18 v -6 h 14 z",
  "sort-by-attributes-alt": "m 14,24 v 1 L 7,32 0,25 V 24 H 4 V 0 h 6 V 24 Z M 32,6 H 18 V 0 h 14 z m -2,8 H 18 V 8 h 12 z m -4,8 h -8 v -6 h 8 z m -2,8 h -6 v -6 h 6 z",
  "hamburger": "M28 0L4 0C2 0 0 2 0 4 0 6 2 8 4 8L28 8C30 8 32 6 32 4 32 2 30 0 28 0zM28 12L4 12C2 12 0 14 0 16 0 18 2 20 4 20L28 20C30 20 32 18 32 16 32 14 30 12 28 12zM28 24L4 24C2 24 0 26 0 28 0 30 2 32 4 32L28 32C30 32 32 30 32 28 32 26 30 24 28 24z",
  "chevron-left": 'm 26,15 v 2 L 11,32 6,27 16,17 V 15 L 6,5 11,0 Z',
  "home": 'M 31.4,17.4 Q 30.8,18 29.9,18 29,18 28.4,17.4 L 28,16.9 V 30 q 0,0.8 -0.6,1.4 Q 26.8,32 26,32 H 20 V 23 Q 20,22.6 19.7,22.3 19.4,22 19,22 H 13 Q 12.6,22 12.3,22.3 12,22.6 12,23 v 9 H 6 Q 5.2,32 4.6,31.4 4,30.8 4,30 V 16.9 L 3.5,17.4 Q 2.9,18 2,18 1.1,18 0.5,17.4 0,16.8 0,15.9 0,15 0.6,14.5 L 14.5,0.6 Q 15.1,0 16,0 q 0.9,0 1.5,0.6 l 13.9,13.9 q 0.6,0.5 0.6,1.4 0,0.9 -0.6,1.5 z',
  "dashboard": 'M 30.7,16.6 C 29.9,14.7 28.8,13 27.3,11.5 25.9,10.1 24.2,9 22.2,8.1 20.2,7.3 18.2,6.9 16,6.9 13.8,6.9 11.8,7.3 9.8,8.1 7.8,9 6.1,10.1 4.7,11.5 3.2,13 2.1,14.7 1.3,16.6 0.4,18.6 0,20.7 0,22.9 c 0,3.1 0.8,6 2.5,8.6 0.2,0.3 0.6,0.5 1,0.5 h 25 c 0.4,0 0.7,-0.2 1,-0.5 C 31.2,28.8 32,26 32,22.9 32,20.7 31.6,18.6 30.7,16.6 Z M 14.4,9.8 c 0.4,-0.4 1,-0.7 1.6,-0.7 0.6,0 1.2,0.2 1.6,0.7 0.4,0.4 0.7,1 0.7,1.6 0,0.6 -0.2,1.2 -0.7,1.6 -0.4,0.4 -1,0.7 -1.6,0.7 -0.6,0 -1.2,-0.2 -1.6,-0.7 -0.4,-0.4 -0.7,-1 -0.7,-1.6 0,-0.6 0.2,-1.2 0.7,-1.6 z M 6.2,24.5 C 5.8,24.9 5.2,25.2 4.6,25.2 4,25.2 3.4,25 3,24.5 2.6,24.1 2.3,23.5 2.3,22.9 c 0,-0.6 0.2,-1.2 0.7,-1.6 0.4,-0.4 1,-0.7 1.6,-0.7 0.6,0 1.2,0.2 1.6,0.7 0.4,0.4 0.7,1 0.7,1.6 0,0.6 -0.2,1.2 -0.7,1.6 z m 3.4,-8 C 9.2,16.9 8.6,17.2 8,17.2 7.4,17.2 6.8,17 6.4,16.5 5.9,16 5.7,15.5 5.7,14.9 c 0,-0.6 0.2,-1.2 0.7,-1.6 0.4,-0.4 1,-0.7 1.6,-0.7 0.6,0 1.2,0.2 1.6,0.7 0.4,0.4 0.7,1 0.7,1.6 0,0.6 -0.2,1.2 -0.7,1.6 z m 10.1,0.2 -1.8,6.8 c 0.6,0.4 1,0.9 1.3,1.6 0.3,0.7 0.3,1.4 0.1,2.1 -0.2,0.9 -0.8,1.6 -1.6,2.1 -0.8,0.5 -1.7,0.6 -2.6,0.4 -0.9,-0.2 -1.6,-0.8 -2.1,-1.6 -0.5,-0.8 -0.6,-1.7 -0.4,-2.6 0.2,-0.7 0.6,-1.3 1.1,-1.8 0.6,-0.5 1.2,-0.7 1.9,-0.8 l 1.8,-6.8 c 0.1,-0.3 0.3,-0.5 0.5,-0.7 0.3,-0.2 0.6,-0.2 0.9,-0.1 0.3,0.1 0.5,0.3 0.7,0.5 0.2,0.3 0.2,0.6 0.1,0.9 z m 2.7,-0.2 c -0.4,-0.4 -0.7,-1 -0.7,-1.6 0,-0.6 0.2,-1.2 0.7,-1.6 0.4,-0.4 1,-0.7 1.6,-0.7 0.6,0 1.2,0.2 1.6,0.7 0.4,0.4 0.7,1 0.7,1.6 0,0.6 -0.2,1.2 -0.7,1.6 -0.4,0.4 -1,0.7 -1.6,0.7 -0.6,0 -1.2,-0.2 -1.6,-0.7 z m 6.7,8 c -0.4,0.4 -1,0.7 -1.6,0.7 -0.6,0 -1.2,-0.2 -1.6,-0.7 -0.4,-0.4 -0.7,-1 -0.7,-1.6 0,-0.6 0.2,-1.2 0.7,-1.6 0.4,-0.4 1,-0.7 1.6,-0.7 0.6,0 1.2,0.2 1.6,0.7 0.4,0.4 0.7,1 0.7,1.6',
  "embed": 'm17.7 7.7c-1 0-1.8 0.7-2 1.6l-3.3 20.4c-0.2 1.1 0.5 2.1 1.6 2.3 1.1 0.2 2.1-0.5 2.3-1.6L19.6 10.1C19.8 8.7 18.8 7.7 17.7 7.7Zm3 5 7 7-7 7c-0.7 0.7-0.7 1.8 0 2.5 0.7 0.7 1.8 0.7 2.5 0l8.3-8.3c0.7-0.8 0.7-1.9 0-2.6L23.2 10c-0.8-0.8-1.8-0.7-2.5 0-0.8 0.8-0.6 2 0 2.7zM0.6 18.9c-0.7 0.8-0.7 1.9 0 2.6l8.3 8.3c0.7 0.7 1.8 0.7 2.5 0 0.7-0.7 0.7-1.8 0-2.5l-7-7 7-7c0.7-0.7 0.7-1.9 0-2.5-0.8-0.7-1.8-0.6-2.5 0-2.2 1.9-5.8 5.6-8.3 8.1z',
  "image": 'M 8.7,2.7 C 6.9,2.7 5.4,4.2 5.4,6 v 14.7 c 0,1.8 1.5,3.3 3.3,3.3 h 20 C 30.5,24 32,22.5 32,20.7 V 6 C 32,4.2 30.5,2.7 28.7,2.7 Z m 20,2.7 c 0.4,0 0.7,0.3 0.7,0.7 v 9.4 L 25.1,10.6 C 24.7,10 24,9.7 23.3,9.7 22.6,9.7 22,10 21.6,10.6 l -5,5.9 L 15,14.9 C 14.1,14 12.6,14 11.7,14.9 L 8,18.6 V 6 C 8,5.6 8.3,5.3 8.7,5.3 c 3.3,0 13.4,0.1 20,0.1 z M 12,6.7 c -1.5,0 -2.7,1.2 -2.7,2.7 0,1.5 1.2,2.7 2.7,2.7 1.5,0 2.7,-1.2 2.7,-2.7 C 14.7,7.9 13.5,6.7 12,6.7 Z M 3.3,11.9 0.1,22.7 c -0.4,1.6 0.5,3.2 2.1,3.7 6.8,1.6 13.7,3.9 21.4,5.6 1.3,0.3 2.5,-0.9 2.9,-2.2 L 27.7,26 H 8.3 C 6.2,26 4.2,24.6 3.6,22.6 3.4,22.1 3.3,21.5 3.3,21 Z',
  "save": 'M 3,0 C 1,0 0,1 0,3 v 26 c 0,2 1,3 3,3 h 26 c 2,0 3,-1 3,-3 V 10 L 28,1 h -4 v 8 c 0,1 -1,2 -2,2 H 10 C 9,11 8,10 8,9 V 0 Z m 9,2 v 6 0 h 4 V 2 Z M 7,17 h 18 c 1,0 2,1 2,2 V 30 H 5 V 19 c 0,-1 1,-2 2,-2 z m 1,3 v 2 h 16 v -2 z m 0,5 v 2 h 16 v -2 z',
}

const svgSet = {
  file: require('./svg/file.inline.svg').default,
  'file--video': require('./svg/file-video.inline.svg').default,
}
customElements.define('x-icon', class extends HTMLElement {
  constructor() {
    super()
    this.attachShadow({mode: 'open'});
    (new MutationObserver(() => this.render())).observe(this, {
      attributes: true,
    })
  }

  get template() {
    const variants = this.icon.split(' ')
    let variant = variants.reduce((v, c) => dSet[c] ? dSet[c] : v, '');
    if (variant) {
      return `<svg viewBox="0 0 32 32"><path d="${variant}"/></svg>`
    }
    variant = variants.reduce((v, c) => svgSet[c] ? svgSet[c] : v, '');
    if (variant) {
      return variant.replace(/\$\{(.+?)\}/, (match, p1) => this.dataset[p1] || '')
    }
    console.warn(`icon "${this.icon}" not defined`)
    return ''
  }

  get icon() {
    return this.getAttribute('icon')
  }

  render() {
    this.shadowRoot.innerHTML = `<style>${style}</style> ${this.template}`
  }

  connectedCallback() {
    this.render()
  }
})
